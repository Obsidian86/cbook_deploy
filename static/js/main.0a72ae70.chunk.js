(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(40)},27:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),s=n(3),u=n(4),l=n(7),i=n(5),p=n(8),d=(n(27),n(6)),m=n(2),f=n.n(m),g=n(9),h=function(){var e=Object(g.a)(f.a.mark(function e(t){var n,a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://budget-backend-227103.appspot.com/".concat(t.url&&t.url),a={method:t.method||"GET",headers:{"content-type":"application/json"}},t.applyAuth&&(a.headers.Authorization="Bearer: ".concat(localStorage.getItem("authToken"))),t.body&&(a.body=t.body),e.abrupt("return",fetch(n,a).then(function(e){return e.json()}).then(function(e){return e}).catch(function(e){return{synced:0}}));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),E=function(){return function(e){localStorage.removeItem("authToken"),localStorage.removeItem("user"),e({type:"LOGOUT_USER"})}},b=function(e){return{type:"LOGIN_USER",payload:{userId:e}}},y=function(e,t){return{type:"ADD_ACCOUNT",payload:{accountInfo:e,tran:t}}},O=function(e){return{type:"DELETE_ACCOUNT",payload:{id:e}}},v=function(e){return{type:"ADD_TRANSACTION",payload:e}},w=function(e,t){return{type:"DELETE_TRANSACTION",payload:{accountId:e,transId:t}}},j=function(e){return{type:"SEND_UPDATE_TRANSACTION",payload:e}},S=function(e){return function(){var t=Object(g.a)(f.a.mark(function t(n){var a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({method:"POST",url:"user/login",body:JSON.stringify(e)});case 2:(a=t.sent).error?n({type:"ERROR",payload:a.error.error}):(localStorage.setItem("user",a.userId),localStorage.setItem("authToken",a.authToken),n(b(a.userId)));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},T=function(e){return function(){var t=Object(g.a)(f.a.mark(function t(n){var a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({method:"POST",url:"user/newuser",body:JSON.stringify(e)});case 2:(a=t.sent).error?n({type:"ERROR",payload:a.error.error}):(localStorage.setItem("user",a.userId),localStorage.setItem("authToken",a.authToken),n(b(a.userAccount._id)));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},A=function(){return function(e){null!==localStorage.getItem("user")&&null!==localStorage.getItem("authToken")&&e(b(localStorage.getItem("user")))}},N=E,C=function(e){return function(){var t=Object(g.a)(f.a.mark(function t(n){var a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"SET_MESSAGE",payload:{message:"Deleting user"}}),t.next=3,h({method:"DELETE",url:"user/".concat(e),applyAuth:!0});case 3:(a=t.sent).error?n({type:"ERROR",payload:a.error.error}):(n(E()),n({type:"SET_MESSAGE",payload:"Account deleted"}));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},I=function(){return{type:"HOME_PAGE"}},k=function(e){return{type:"VIEW_PAGE",payload:{page:"View Account",accountView:e}}},_=function(e){return{type:"TOGGLE_DRAWER",payload:{drawer:!e}}},D=function(e){return{type:"SET_MESSAGE",payload:e}},R=function(){return{type:"TOGGLE_SETTINGS"}},U=function(e,t){return function(){var n=Object(g.a)(f.a.mark(function n(a){var r;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h({url:"accounts/"+t,method:"POST",body:JSON.stringify(e),applyAuth:!0});case 2:(r=n.sent).error?a({type:"ERROR",payload:r.error.error}):a(y(r.account,r.tran));case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},L=function(e,t){return function(){var n=Object(g.a)(f.a.mark(function n(a){var r;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"SET_MESSAGE",payload:{message:"Deleting account"}}),n.next=3,h({url:"accounts/"+t,method:"DELETE",body:JSON.stringify({account:e}),applyAuth:!0});case 3:(r=n.sent).error?a({type:"ERROR",payload:r.error.error}):(a({type:"SET_MESSAGE",payload:{message:""}}),a(O(e)));case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(g.a)(f.a.mark(function t(n){var a,r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h({url:"accounts/".concat(e),applyAuth:!0});case 2:a=t.sent,r=a.accounts,a.error?n({type:"ERROR",payload:a.error.error}):n({type:"LOAD_ACCOUNTS",payload:{accounts:r}});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},F=function(e,t){return function(){var n=Object(g.a)(f.a.mark(function n(a){var r;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h({method:"POST",url:"transactions/".concat(t),body:JSON.stringify(e),applyAuth:!0});case 2:(r=n.sent).error?a({type:"ERROR",payload:r.error.error}):a(v(r.newTrans));case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},V=function(e,t,n){return function(){var a=Object(g.a)(f.a.mark(function a(r){var c;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h({method:"DELETE",url:"transactions/".concat(n),body:JSON.stringify({accountId:e,transId:t}),applyAuth:!0});case 2:(c=a.sent).error?r({type:"ERROR",payload:c.error.error}):r(w(e,t));case 4:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},B=function(e){return{type:"SET_UPDATE_TRANSACTION",payload:e}},G=function(e,t){return function(){var n=Object(g.a)(f.a.mark(function n(a){var r;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h({method:"PUT",url:"transactions/".concat(t),body:JSON.stringify(e),applyAuth:!0});case 2:(r=n.sent).error?a({type:"ERROR",payload:r.error.error}):a(j(e));case 4:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()},P={width:"90%",margin:"0 auto",padding:"5px 0",borderBottom:"1px solid gray"},M={paddingBottom:"25px",color:"green"},J={border:"2px solid blue",height:"35px",width:"44px",borderRadius:"50%",transform:"rotate(80deg)",paddingTop:"5px",color:"blue",marginLeft:"40px",marginTop:"20px"},W=function(e){return r.a.createElement("span",{style:P,className:"column"},r.a.createElement("i",{style:J},":)"),r.a.createElement("strong",{style:M}," ",e.title," "))},Y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(i.a)(t).call(this))).toggleForm=function(t){t.preventDefault(),e.setState({loginForm:!e.state.loginForm})},e.handleSubmit=function(t){t.preventDefault();var n={username:document.getElementById("username").value,password:document.getElementById("password").value},a="";""===n.username&&(a="Username can not be empty"),""===n.password&&(a="Password can not be empty"),e.state.loginForm?""===a?e.props.loginUser(n):e.props.setMessage({message:a}):(n.repassword=document.getElementById("rePassword").value,n.password!==n.repassword?a="Passwords must match":n.password.length<5&&(a="Password must be longer than four characters"),""===a?e.props.createUser(n):e.props.setMessage({message:a}))},e.state={loginForm:!0},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.checkLoggedIn()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"displayList"},r.a.createElement("p",null,r.a.createElement("strong",null,r.a.createElement(W,{title:this.state.loginForm?"Login":"New user"})," ")),r.a.createElement("p",null,r.a.createElement("strong",null,""!==this.props.message&&this.props.message)),r.a.createElement("form",{action:"#",onSubmit:function(t){e.handleSubmit(t)}},r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",id:"username"}),r.a.createElement("label",{htmlFor:"username"},"Password"),r.a.createElement("input",{type:"password",id:"password"}),!this.state.loginForm&&r.a.createElement("span",null,r.a.createElement("label",{htmlFor:"rePassword"},"Re-type password"),r.a.createElement("input",{type:"password",id:"rePassword"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"column"},this.state.loginForm?r.a.createElement("button",{className:"blue",onClick:function(t){return e.toggleForm(t)}},"New user"):r.a.createElement("button",{className:"blue",onClick:function(t){return e.toggleForm(t)}},"Login"),r.a.createElement("button",{className:"green"},"Submit")),r.a.createElement("br",null),r.a.createElement("br",null))))}}]),t}(a.Component),$=Object(d.b)(function(e){return{message:e.message,user:e.user}},function(e){return{loginUser:function(t){return e(S(t))},createUser:function(t){return e(T(t))},setMessage:function(t){return e(D(t))},checkLoggedIn:function(){return e(A())}}})(Y),H=function(e){if(isNaN(e)||!e)return"$0";for(var t=(e=parseFloat(e).toFixed(2)).split("."),n="",a=0,r=t[0].length-1;r>-1;r--)n+=t[0][r],3===++a&&0!==r&&"-"!==t[0][r-1]&&(n+=",",a=0);return e=n.split("").reverse().join("")+"."+t[1],"$".concat(e)},z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{onClick:function(){return e.props.viewAccount(e.props.account._id)},className:"interact"},r.a.createElement("div",{className:"mainLine"},r.a.createElement("p",null,this.props.account.name),r.a.createElement("p",{className:this.props.account.balance<0?"subtract":"add"},H(this.props.account.balance)," ")),r.a.createElement("p",null,this.props.account.desc))}}]),t}(a.Component),q=Object(d.b)(function(e){return{}},function(e){return{viewAccount:function(t){return e(k(t))}}})(z),K=(n(36),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this))).timer=setInterval(function(){var e=n.state.message+".";e.length>n.props.message.length+6&&(e=n.props.message),n.setState({message:e})},700),n.state={message:""},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({message:this.props.message})}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){return r.a.createElement("h3",{style:{width:"100%",color:"black",padding:"10px 0",backgroundColor:"#c3c3c3",textAlign:"center"}},this.state.message)}}]),t}(a.Component)),Q=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(l.a)(this,Object(i.a)(t).call(this))).deleteAccount=function(){e.state.verifyDelAccount?e.props.deleteAccount(e.props.accountView._id,e.props.userId):e.setState({verifyDelAccount:!0})},e.deleteUser=function(){e.state.verifyDelUser?e.props.deleteUser(e.props.userId):e.setState({verifyDelUser:!0})},e.state={verifyDelAccount:!1,verifyDelUser:!1},e}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"settingsContainer"},r.a.createElement("div",{id:"settingsBox"},r.a.createElement("button",{className:"red close_btn",onClick:this.props.toggleSettings}," Close "),r.a.createElement("h2",null,"Settings"),r.a.createElement("strong",null,this.props.accountView.name||"User Account"," "),this.props.message&&r.a.createElement(K,{message:this.props.message}),r.a.createElement("button",{className:"btn blue",onClick:this.props.logOut},"Log out"),this.state.verifyDelAccount&&r.a.createElement("p",null,"Are you sure you want to delete this account?"),this.props.accountView._id&&r.a.createElement("button",{className:"red",onClick:e.deleteAccount},e.state.verifyDelAccount?"Yes, delete this account":"Delete Account"),r.a.createElement("hr",null),this.state.verifyDelUser&&r.a.createElement("p",null,"Are you sure you want to delete this user and all accounts/transactions?"),r.a.createElement("button",{className:"red",onClick:this.deleteUser},this.state.verifyDelUser?"Yes, delete this account":"Delete User")))}}]),t}(a.Component),X=Object(d.b)(function(e){return{accountView:e.accountView,userId:e.user,page:e.page,message:e.message}},function(e){return{logOut:function(){return e(N())},toggleSettings:function(){return e(R())},deleteAccount:function(t,n){return e(L(t,n))},deleteUser:function(t){return e(C(t))}}})(Q),Z=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.accounts,n=e.loadState,a=e.settings,c=e.toggleSettings,o=0,s=t.length>0?t.map(function(e){return o+=parseFloat(e.balance),r.a.createElement(q,{account:e,key:e._id})}):r.a.createElement("p",null,r.a.createElement("strong",null,"Add a new account to begin"));return r.a.createElement("div",null,a&&r.a.createElement(X,null),r.a.createElement("div",{className:"displayList"},r.a.createElement("div",{className:"column"},r.a.createElement("h2",null,"Total: ",H(o)),r.a.createElement("button",{onClick:c},"Settings")),"loading"===n?r.a.createElement("p",null,r.a.createElement("strong",null,"Loading...")):s))}},{key:"componentDidMount",value:function(){"loading"===this.props.loadState&&this.props.loadAccounts(this.props.userId)}}]),t}(a.Component),ee=Object(d.b)(function(e){return{accounts:e.accounts,loadState:e.loadState,userId:e.user,settings:e.settings}},function(e){return{loadAccounts:function(t){return e(x(t))},toggleSettings:function(){return e(R())}}})(Z),te=function(e){return e.transactions.slice(0).reverse().map(function(t,n){return r.a.createElement("div",{key:n,id:"t".concat(n),className:"interact",onClick:function(){return e.toggleOptions("t".concat(n))}},r.a.createElement("div",{className:"mainLine"},r.a.createElement("p",null,t.payee," "),r.a.createElement("p",{className:t.amount>=0?"add":"subtract"},H(t.amount))),r.a.createElement("div",{className:"column"},r.a.createElement("p",null,t.date),r.a.createElement("p",null,"yes"===t.cleared?"cleared":"not cleared")),r.a.createElement("div",{className:"options"},r.a.createElement("button",{className:"green",onClick:function(){e.setUpdateTransaction(t)}},"update"),r.a.createElement("button",{className:"red",onClick:function(){return e.deleteTransaction(e.accountId,t._id,e.userId)}},"delete")))})},ne=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(r)))).toggleOptions=function(e){var t=document.getElementById(e),n=document.getElementsByClassName("show");t.classList.contains("show")?n[0].classList.remove("show"):(n.length>0&&n[0].classList.remove("show"),t.classList.add("show"))},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.back,n=e.accountView,a=e.setUpdateTransaction,c=e.toggleSettings,o=e.settings,s=e.userId,u=n.name,l=n.desc,i=n.balance,p=n.transactions;return r.a.createElement("div",null,o&&r.a.createElement(X,null),r.a.createElement("div",{className:"displayList"},r.a.createElement("div",{className:"column"},r.a.createElement("button",{onClick:t},"Back"),r.a.createElement("h2",null,u),r.a.createElement("button",{onClick:c},"Settings")),r.a.createElement("div",{className:"info centered"},r.a.createElement("p",null,l),r.a.createElement("p",null,H(i))),r.a.createElement(te,{toggleOptions:this.toggleOptions,setUpdateTransaction:a,deleteTransaction:this.props.deleteTransaction,userId:s,transactions:p,accountId:n._id})))}}]),t}(a.Component),ae=Object(d.b)(function(e){return{accountView:e.accountView,userId:e.user,settings:e.settings}},function(e){return{deleteTransaction:function(t,n,a){return e(V(t,n,a))},setUpdateTransaction:function(t){return e(B(t))},back:function(){return e(I())},toggleSettings:function(){return e(R())}}})(ne),re=function(e){var t=e.title;return r.a.createElement("div",{className:"header"},r.a.createElement("h3",null,"CheckBook - ",t))},ce=n(13),oe=(n(38),function(){return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"accountName"},"Account name"),r.a.createElement("input",{type:"text",id:"accountName",name:"accountName",className:"field"}),r.a.createElement("label",{htmlFor:"startingBalance"},"Starting balance"),r.a.createElement("input",{type:"number",id:"startingBalance",name:"startingBalance",className:"field",step:".01"}),r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("input",{type:"text",id:"description",name:"description",className:"field"}))}),se=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){""!==this.props.updatingTransaction&&("no"===this.props.updatingTransaction.cleared&&this.props.changeSelVal("setCleared",!1),"-"===this.props.updatingTransaction.amount.split("")[0]&&this.props.changeSelVal("setDeposit",!1))}},{key:"render",value:function(){var e,t,n,a=this,c=this.props.updatingTransaction;if(""===c)n=function(){return r.a.createElement("input",{type:"number",id:"amount",name:"amount",className:"field",step:".01",defaultValue:""})},e=function(){return r.a.createElement("span",null,r.a.createElement("p",{className:"f_choice setCleared field choice",onClick:function(e){return a.props.setChoice(e)}},"Cleared"),r.a.createElement("p",{className:"f_choice setCleared setFalse field",onClick:function(e){return a.props.setChoice(e)}},"Not cleared"))},t=function(){return r.a.createElement("span",null,r.a.createElement("p",{className:"f_choice setDeposit choice",onClick:function(e){return a.props.setChoice(e)}},"Deposit"),r.a.createElement("p",{className:"f_choice setDeposit setFalse",onClick:function(e){return a.props.setChoice(e)}},"withdraw"))};else{c.amount=c.amount.toString(),e=function(){return r.a.createElement("span",null,r.a.createElement("p",{className:"f_choice setCleared field ".concat("yes"===c.cleared?"choice":""),onClick:function(e){return a.props.setChoice(e)}},"Cleared"),r.a.createElement("p",{className:"f_choice setCleared setFalse field ".concat("no"===c.cleared?"choice":""),onClick:function(e){return a.props.setChoice(e)}},"Not cleared"))};var o=c.amount.split("")[0],s="-"===o?c.amount.split("-")[1]:c.amount;t=function(){return r.a.createElement("span",null,r.a.createElement("p",{className:"f_choice setDeposit ".concat("-"!==o?"choice":""),onClick:function(e){return a.props.setChoice(e)}},"Deposit"),r.a.createElement("p",{className:"f_choice setDeposit setFalse ".concat("-"===o?"choice":""),onClick:function(e){return a.props.setChoice(e)}},"withdrawl"))},n=function(){return r.a.createElement("input",{type:"number",id:"amount",name:"amount",className:"field",step:".01",defaultValue:s})}}return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"payee"},"Payee"),r.a.createElement("input",{type:"text",id:"payee",name:"payee",className:"field",defaultValue:""!==c?c.payee:""}),t(),r.a.createElement("label",{htmlFor:"date"},"Amount"),n(),r.a.createElement("label",{htmlFor:"date"},"Date"),r.a.createElement("input",{type:"text",id:"date",name:"date",defaultValue:""!==c?c.date:function(){var e=new Date;return"".concat(e.getMonth()+1,"-").concat(e.getDate(),"-").concat(e.getFullYear())}()}),e())}}]),t}(a.Component),ue=Object(d.b)(function(e){return{updatingTransaction:e.updatingTransaction}})(se),le=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(i.a)(t).call(this))).handleSubmit=function(e){if(e.preventDefault(),"All Accounts"===n.props.page){var t={name:document.getElementById("accountName").value,balance:document.getElementById("startingBalance").value,desc:document.getElementById("description").value};n.props.addAccount(t,n.props.userId),n.props.toggleDrawer(n.props.drawer)}else{var a=""===document.getElementById("amount").value?0:parseFloat(document.getElementById("amount").value);0===a||n.state.setDeposit||(a=-1*parseFloat(a));var r={account_id:n.props.accountId,transaction_id:n.props.updatingTransaction._id||0,transaction:{payee:document.getElementById("payee").value,amount:a,date:document.getElementById("date").value,cleared:n.state.setCleared?"yes":"no"}};""===n.props.updatingTransaction?n.props.addTransaction(r,n.props.userId):n.props.sendUpdateTransaction(r,n.props.userId)}for(var c=0;c<document.getElementsByClassName("field").length;c++)document.getElementsByClassName("field")[c].value="";n.props.toggleDrawer(n.props.drawer)},n.changeSelVal=function(e,t){n.setState(Object(ce.a)({},e,t))},n.setChoice=function(e){var t=e.target.classList.contains("setDeposit")?"setDeposit":"setCleared",a=document.getElementsByClassName(t),r=!1;if(!e.target.classList.contains("choice")){r=!0;for(var c=0;c<a.length;c++)a[c].classList.toggle("choice")}r&&n.changeSelVal(t,!e.target.classList.contains("setFalse"))},n.state={setDeposit:!0,setCleared:!0},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e,t=this,n="";return n="All Accounts"===this.props.page?"Adding new account":""!==this.props.updatingTransaction?"Updating transaction":"Adding transaction",e=this.props.drawer?r.a.createElement("form",{action:"#",onSubmit:this.handleSubmit},r.a.createElement("h2",null,n),"All Accounts"===this.props.page?r.a.createElement(oe,null):r.a.createElement(ue,{setChoice:this.setChoice,changeSelVal:this.changeSelVal}),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("button",null,"Submit")):r.a.createElement("p",null,"Loading content"),r.a.createElement("div",{className:"actionDrawer ".concat(this.props.drawer?"opened":"")},r.a.createElement("button",{id:"drawerToggle",onClick:function(){return t.props.toggleDrawer(t.props.drawer)}},"+"),r.a.createElement("div",null,e))}}]),t}(a.Component),ie=Object(d.b)(function(e){return{page:e.page,drawer:e.drawer,accountId:e.accountView._id,userId:e.user,updatingTransaction:e.updatingTransaction}},function(e){return{toggleDrawer:function(t){return e(_(t))},addTransaction:function(t,n){return e(F(t,n))},sendUpdateTransaction:function(t,n){return e(G(t,n))},addAccount:function(t,n){return e(U(t,n))}}})(le),pe=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e;switch(this.props.page){case"All Accounts":e=r.a.createElement(ee,null);break;case"View Account":e=r.a.createElement(ae,null);break;default:e=r.a.createElement($,null)}return r.a.createElement("div",null,r.a.createElement(re,{title:this.props.page}),e,"Log In"!==this.props.page&&r.a.createElement(ie,null))}}]),t}(a.Component),de=Object(d.b)(function(e){return{page:e.page}})(pe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=n(1),fe=n(11),ge={page:"Log In",message:"",user:"",accountView:{},updatingTransaction:"",loadState:"loading",accounts:[],drawer:!1,settings:!1},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR":return null!==localStorage.getItem("authToken")&&localStorage.removeItem("authToken"),null!==localStorage.getItem("user")&&localStorage.removeItem("user"),Object(me.a)({},ge,{message:t.payload});case"LOGIN_USER":return function(e,t){return Object(me.a)({},e,{message:"",user:t.payload.userId,page:"All Accounts"})}(e,t);case"LOGOUT_USER":return Object(me.a)({},ge);case"LOAD_ACCOUNTS":return function(e,t){return Object(me.a)({},e,{loadState:"loaded",accounts:t.payload.accounts})}(e,t);case"ADD_ACCOUNT":return function(e,t){var n=Object(me.a)({},t.payload.accountInfo);return n.transactions=[t.payload.tran],Object.assign(Object(me.a)({},e,{accounts:Object(fe.a)(e.accounts).concat([n])}))}(e,t);case"DELETE_ACCOUNT":return function(e,t){var n=Object(fe.a)(e.accounts);return Object(me.a)({},e,{accounts:n.filter(function(e){return e._id!==t.payload.id}),drawer:!1,page:"All Accounts",accountView:{}})}(e,t);case"ADD_TRANSACTION":return function(e,t){var n=Object.assign({},e.accountView);n.balance=parseFloat(e.accountView.balance)+parseFloat(t.payload.amount),n.transactions=Object(fe.a)(e.accountView.transactions).concat([t.payload]);for(var a=Object(fe.a)(e.accounts),r=0;r<a.length;r++)if(a[r]._id===n._id){a[r]=n;break}return Object(me.a)({},e,{accountView:n,accounts:Object(fe.a)(a)})}(e,t);case"SET_UPDATE_TRANSACTION":return function(e,t){return Object(me.a)({},e,{drawer:!0,updatingTransaction:Object.assign({},t.payload)})}(e,t);case"SEND_UPDATE_TRANSACTION":return function(e,t){for(var n,a=Object(fe.a)(e.accounts),r=0;r<a.length;r++)if(a[r]._id===t.payload.account_id){n=r;for(var c=0;c<a[r].transactions.length;c++)a[r].transactions[c]._id===t.payload.transaction_id&&(a[r].balance=parseFloat(a[r].balance)-parseFloat(a[r].transactions[c].amount)+parseFloat(t.payload.transaction.amount),a[r].transactions[c]=Object(me.a)({},t.payload.transaction,{_id:t.payload.transaction_id}))}return Object(me.a)({},e,{drawer:!1,updatingTransaction:"",accounts:Object(fe.a)(a),accountView:Object.assign({},a[n])})}(e,t);case"DELETE_TRANSACTION":return function(e,t){for(var n,a=Object(fe.a)(e.accounts),r=0;r<a.length;r++)a[r]._id===t.payload.accountId&&(n=r);var c=a[n].transactions.filter(function(e){return e._id===t.payload.transId})[0].amount;return a[n].transactions=a[n].transactions.filter(function(e){return e._id!==t.payload.transId}),a[n].balance=parseFloat(e.accountView.balance)-parseFloat(c),Object(me.a)({},e,{accounts:Object(fe.a)(a),accountView:Object(me.a)({},a[n])})}(e,t);case"TOGGLE_SETTINGS":return function(e){return Object(me.a)({},e,{settings:!e.settings})}(e);case"VIEW_PAGE":return function(e,t){var n=e.accounts.filter(function(e){return t.payload.accountView===e._id});return Object(me.a)({},e,{drawer:!1,page:t.payload.page,accountView:Object.assign(Object(me.a)({},n[0]))})}(e,t);case"HOME_PAGE":return function(e,t){return Object(me.a)({},e,{drawer:!1,page:"All Accounts",accountView:{}})}(e);case"SET_MESSAGE":return function(e,t){return Object(me.a)({},e,{message:t.payload.message})}(e,t);case"TOGGLE_DRAWER":return function(e,t){return Object(me.a)({},e,{drawer:t.payload.drawer,updatingTransaction:""})}(e,t);default:return e}},Ee=n(12),be=n(21),ye=Object(Ee.c)(he,Object(Ee.a)(be.a));o.a.render(r.a.createElement(d.a,{store:ye},r.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,2,1]]]);
//# sourceMappingURL=main.0a72ae70.chunk.js.map